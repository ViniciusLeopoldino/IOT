# Mottu Vision ‚Äì Sistema de Identifica√ß√£o Visual de Motocicletas

![Python](https://img.shields.io/badge/Python-3.9%2B-blue.svg)
![Framework](https://img.shields.io/badge/Framework-Flask-green.svg)
![Computer Vision](https://img.shields.io/badge/Vision-OpenCV%20%7C%20YOLOv8-orange.svg)

O **Mottu Vision** √© um prot√≥tipo funcional que utiliza Vis√£o Computacional para automatizar a identifica√ß√£o e o registro de motocicletas em p√°tios de armazenamento. O sistema utiliza a webcam para ler QR Codes contendo os dados de uma moto e os persiste em um sistema de backend.

---

## üéØ Problema de Neg√≥cio

A gest√£o manual de frotas de motocicletas em grandes p√°tios √© um processo lento, caro e sujeito a erros humanos. A necessidade de digitar informa√ß√µes como placa, chassi e contrato para cada ve√≠culo consome tempo produtivo e pode levar a registros inconsistentes, dificultando a localiza√ß√£o e o gerenciamento log√≠stico dos ativos da Mottu.

## üí° Solu√ß√£o Proposta

Implementamos uma solu√ß√£o de Vis√£o Computacional que automatiza o processo de "check-in" das motocicletas. Utilizando a webcam de um dispositivo (como um celular ou tablet), o sistema localiza e decodifica um QR Code afixado na motocicleta. Os dados extra√≠dos s√£o enviados via requisi√ß√£o HTTP para um backend simples que armazena as informa√ß√µes de forma persistente em um arquivo CSV, que funciona como um log de registros.

---

## üèõÔ∏è Arquitetura do Sistema

O projeto √© dividido em dois componentes principais que se comunicam via API REST:

1.  **Frontend (Vis√£o Computacional - `mottu_vision.py`)**
    * Respons√°vel por capturar o feed da webcam usando **OpenCV**.
    * Utiliza a biblioteca **pyzbar** para escanear o v√≠deo em tempo real em busca de QR Codes.
    * Ao encontrar e decodificar um QR Code contendo um JSON v√°lido, utiliza a biblioteca **requests** para enviar os dados para o backend.
    * Possui uma l√≥gica para evitar o envio de registros duplicados em sequ√™ncia.
    * Fornece feedback visual em tempo real, desenhando contornos e status na janela de v√≠deo.

2.  **Backend (API de Armazenamento - `backend.py`)**
    * Constru√≠do com **Flask**, um microframework Python.
    * Exp√µe um √∫nico endpoint: `/armazenar_moto` (aceita requisi√ß√µes `POST`).
    * Recebe os dados da moto em formato JSON, adiciona um `timestamp` ao registro.
    * Salva (persiste) os dados de forma estruturada em um arquivo **`log_motos.csv`**, funcionando como um banco de dados simplificado.
    * Retorna uma resposta de sucesso ou erro para o frontend.

---

## üõ†Ô∏è Tecnologias Utilizadas

* **Linguagem:** Python 3
* **Vis√£o Computacional:**
    * `opencv-python`: Para captura e manipula√ß√£o de v√≠deo da webcam.
    * `pyzbar`: Para decodifica√ß√£o de c√≥digos de barra e QR Codes.
    * `numpy`: Para opera√ß√µes num√©ricas.
* **Backend:**
    * `Flask`: Para a cria√ß√£o da API REST.
* **Comunica√ß√£o:**
    * `requests`: Para realizar chamadas HTTP do frontend para o backend.
* **Detec√ß√£o de Objetos (Opcional/Estudo):**
    * `ultralytics`: O modelo YOLOv8 foi utilizado em fases iniciais de estudo, mas a vers√£o final foca na leitura de QR Codes para simplicidade e precis√£o.

---

## ‚ñ∂Ô∏è Como Executar o Projeto

Siga os passos abaixo para configurar e rodar o ambiente localmente.

### 1. Pr√©-requisitos
* Python 3.8 ou superior
* `pip` (gerenciador de pacotes do Python)
* Uma webcam conectada ao computador.

### 2. Instala√ß√£o
```bash
# Clone este reposit√≥rio
git clone https://github.com/ViniciusLeopoldino/IOT.git
cd IOT

# Crie e ative um ambiente virtual (altamente recomendado)
python -m venv venv
# No Windows: venv\Scripts\activate
# No macOS/Linux: source venv/bin/activate

# Instale as depend√™ncias
pip install -r requirements.txt
```

### 3. Execu√ß√£o dos Servi√ßos (em 2 Terminais)

* **Terminal 1: Inicie o Backend**
    O backend precisa estar rodando para receber e salvar os dados.
    ```bash
    python backend.py
    ```
    O terminal deve indicar que o servidor est√° rodando em `http://127.0.0.1:5000`.

* **Terminal 2: Inicie o Frontend (Vis√£o Computacional)**
    Abra um **novo terminal** (e ative o ambiente virtual novamente).
    ```bash
    python mottu_vision.py
    ```
    Uma janela do OpenCV ser√° aberta, exibindo o feed da sua webcam.

### 4. Como Testar
1.  **Gere um QR Code:** Use um gerador online (como o [QR Code Generator](https://www.qr-code-generator.com/)) e insira um texto em formato JSON como no exemplo abaixo:
    ```json
    {
      "placa": "MTO2025",
      "chassi": "9C2KC1670GR500001",
      "modelo": "Honda Pop 110i",
      "km": "5300",
      "contrato": "987654321",
      "ocorrencia": "Arranhao no tanque"
    }
    ```
2.  **Aponte a Webcam:** Mostre o QR Code (na tela do seu celular ou impresso) para a webcam.
3.  **Observe:** O sistema ir√° destacar o QR Code, enviar os dados, e o terminal do backend mostrar√° a requisi√ß√£o recebida. O arquivo `log_motos.csv` ser√° atualizado com uma nova linha.

---

## üë®‚Äçüíª Integrantes

* **RM:** 557047 **Nome:** Vinicius Leopoldino de Oliveira
* **RM:** 556834 **Nome:** Pablo Lopes Doria de Andrade
* **Curso:** An√°lise e Desenvolvimento de Sistemas - FIAP
* **Mat√©ria:** Disruptive Architectures: IoT, IOB & Generative IA